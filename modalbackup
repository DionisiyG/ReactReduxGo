import React, { Component } from 'react'
import Dropzone from 'react-dropzone'


class ModalWindow extends Component {
    constructor(props) {
        super(props)
        this.state = {
            preview: [],
            isShowing: true
        }
        this.handleDrop = this.handleDrop.bind(this)
    }
    handleDrop([{ preview }]) {
        this.setState({ preview })
    }
    getSrcDescOfItem(e) {
        let desc = this.getDesc.value
        let src = this.getImgSrc.currentSrc
        this.props.onOkClicked(desc, src)
    }
    render() {
        let { onCancel, isShowing } = this.props
        return (
            <div className="confirm-modal">
                {isShowing &&
                    <div>
                        <div className="modal-backdrop"></div>
                        <div className="confirm-modal-content">
                            <Dropzone onDrop={this.handleDrop} accept="image/jpeg,image/jpg,image/tiff,image/gif" multiple={false} acceptStyle={{ border: "15px solid green" }}>
                                Click to upload.
                             </Dropzone>
                            <img src={this.state.preview} alt='' ref={(_ref) => this.getImgSrc = _ref} />
                            <input className="confirm-modal-input" type="text" ref={(_ref) => this.getDesc = _ref} />
                            <button className='btn' onClick={(e) => this.getSrcDescOfItem(e)}>OK</button>
                            <button className="btn" onClick={() => onCancel()}>Cancel</button>
                        </div>
                    </div>
                }
            </div>
        )
    }
}

export default ModalWindow